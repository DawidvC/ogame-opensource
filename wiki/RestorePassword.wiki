= Процедура восстановления пароля =

В таблице uni_users есть два поля:

password: MD5-хеш пароля и секретного слова (CHAR(32))<br>
temp_pass: MD5-хеш пароля для восстановления и секретного слова (CHAR(32))

При заходе на акк с паролем password, производится обычный вход.

После успешного прохождения процедуры восстановления пароля и отправки письма с рандомным паролем на почту, этот же пароль записывается в поле temp_pass.

Изначально после регистрации temp_pass = "" (пустая строка).

При заходе на акк с паролем temp_pass , если temp_pass не пустая строка производится следующее:

  * password становится таким же как temp_pass 
  * temp_pass становится пустой строкой
  * аккаунт деактивируется и высылается письмо о повторной активации

Это сделано специально для защиты от вандализма, чтобы злоумышленники, который узнали email игрока, постоянно не меняли его пароль.